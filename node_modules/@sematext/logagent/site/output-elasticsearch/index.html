<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Elasticsearch - @sematext/logagent</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Elasticsearch";
    var mkdocs_page_input_path = "output-elasticsearch.md";
    var mkdocs_page_url = "/output-elasticsearch/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> @sematext/logagent</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Features and Overview</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../installation/">Installation</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../windows/">Windows Installation</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../cli-parameters/">Usage</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../config-file/">Configuration file</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../parser/">Log Parser and pattern definitions</a>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Plugins</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../plugins/">Overview</a>
        
    </li>

        
            
    <ul class="subnav">
    <li><span>Output plugins</span></li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">Elasticsearch</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#elasticsearch-output-plugin">Elasticsearch Output Plugin</a></li>
                
                    <li><a class="toctree-l4" href="#features">Features</a></li>
                
            
                <li class="toctree-l3"><a href="#simple-config">Simple config</a></li>
                
            
                <li class="toctree-l3"><a href="#log-routing-to-multiple-targets">Log routing to multiple targets</a></li>
                
            
                <li class="toctree-l3"><a href="#http-and-https-options">HTTP and HTTPS options</a></li>
                
            
            </ul>
        
    </li>

        
    </ul>

        
    </ul>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Filter</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../filters/">About filters</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../input-filter-grep/">Grep input filter</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../output-filter-sql/">SQL output filter</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">@sematext/logagent</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Plugins &raquo;</li>
        
      
        
          <li>Output plugins &raquo;</li>
        
      
    
    <li>Elasticsearch</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/sematext/logagent-js" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="elasticsearch-output-plugin">Elasticsearch Output Plugin</h1>
<p>The Elasticsearch output plugin forwards parsed logs to <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a> or <a href="https://sematext.com/logsene">Logsene</a>. </p>
<h2 id="features">Features</h2>
<ul>
<li>log routing by log source to multiple Elasticsearch servers</li>
<li>log routing by log source to multiple Elasticearch indices (or Logsene Apps)</li>
<li>SSL/TLS by default, when using Logsene</li>
<li>Two-way SSL Authentication, also known as Mutual Authentication as part of PKI, secure client authentication with SSL client certificates</li>
<li>bulk indexing with timeout (1000 docs or 10 second timeout by default)</li>
<li>disk buffer an re-transmit when connection to Elasticsearch fails</li>
<li>renaming of invalid field names</li>
<li>limit field size (240k by default)</li>
</ul>
<h1 id="simple-config">Simple config</h1>
<p>The following example configuration ships all log files in /var/log (including sub-directories) to one Elasticsearch index. </p>
<pre><code class="yml">input:
  files:
      - '/var/log/**/*.log'
output:
  my-logsene-app: 
    module: elasticsearch
    url: https://logsene-receiver.sematext.com 
    index: bb308f80-0453-485e-894c-f80c054a0f10 
</code></pre>

<h1 id="log-routing-to-multiple-targets">Log routing to multiple targets</h1>
<p>In some situations it is required to ship data from different sources to differnt Elasticsearch servers. The output section in the Logagnet configuration file accepts multiple definitions for the Elasticsearch output module. </p>
<p>Each Elasticsearch output might have a a list list of indices followed by a list of regular expressions matching the log source (e.g. file name of the log file). </p>
<p>The following expamle ships logs from wireless devices and authentication logs to a local Elasticsearch server and other server logs to multiple Logsene applications. </p>
<pre><code class="yml">input:
  files:
      - '/var/log/**/*.log'

output:
  # index logs in Elasticsearch or Logsene
  local-elasticsearch: 
    modul: elasticsearch
    url: http://localhost:9200
    # default index to use, for all logs that don't match any other configuration
    index: other_logs
    # specific indices to use per logSource field of parsed logs
    indices: 
      wireless_logs: # use regex to match log source e.g. /var/log/wifi.log
        - wifi|bluetooth
      security_logs: 
        - auth\.log
   logsene-saas:
     module: elasticsearch
     url: https://logsene-receiver.sematext.com
     indices:
       bb308f80-0453-485e-894c-f80c054a0f10:
        - [nginx|httpd]\.log
       a0ca5032-62da-467d-b6d5-e465a7ce45bb
        - mysql|postgres|oracle
       969020b4-f11c-41dd-86e4-24e67759cdb3
        - mongo.*\.log
        - myapp1\/app.log
        - myapp2\/app.log
</code></pre>

<h1 id="http-and-https-options">HTTP and HTTPS options</h1>
<p>The Elasticsearch output module accepts <a href="https://nodejs.org/api/https.html#https_https_request_options_callback">http(s) options</a>. Client side certifictes and keys are specified with a file name. If you use self signed certifictes, set  <em>rejectUnauthorized</em> to <em>false</em>.</p>
<pre><code class="yml">output:
  secure-elasticsearch: 
    module: elasticsearch
    url: https://localhost 
    index: logs 
    httpOptions:
      key: /ssl-keys/client.key
      cert: /ssl-keys/client.crt
      rejectUnauthorized: true
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../filters/" class="btn btn-neutral float-right" title="About filters">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../plugins/" class="btn btn-neutral" title="Overview"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/sematext/logagent-js" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../plugins/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../filters/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
